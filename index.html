<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ACACIA â€¢ Garden Codex</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="This archive reads clearly and breathes quietly. Follow the keys below.">
  <meta name="theme-color" content="#0b0b0e">
  <meta name="acacia-call" content="ACACIAâ€¢GAIAâ€¢HKX277206">
  <link rel="canonical" href="https://brandonmarkgaia-hub.github.io/Acacia-garden-codex/">
  <meta property="og:title" content="ACACIA â€¢ Garden Codex">
  <meta property="og:description" content="An open, living archive of echoes and cycles â€” planted once, forever growing.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://brandonmarkgaia-hub.github.io/Acacia-garden-codex/">
  <meta property="og:image" content="https://brandonmarkgaia-hub.github.io/Acacia-garden-codex/leaf.png">
  <link rel="icon" href="favicon.ico">
  <style>
    :root{--bg:#0b0b0e;--fg:#e9e9ef;--muted:#b7b7c6;--card:#141419;--ring:#2ecc71;--link:#b9b6ff;--hair:#23232b}
    html,body{background:var(--bg);color:var(--fg);font-family:system-ui,Arial,sans-serif}
    main{max-width:860px;margin:3rem auto;padding:0 1rem}
    h1{font-size:2.4rem;margin:0 0 .5rem 0}
    p.lede{color:var(--muted);margin:.5rem 0 1.25rem}
    .leaf{display:inline-block;border:1px solid var(--ring);color:var(--ring);padding:.15rem .6rem;border-radius:999px;font-size:.9rem;margin-left:.4rem}
    section{margin:2rem 0}
    h2{font-size:1rem;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);margin:0 0 .6rem}
    .grid{display:grid;gap:.8rem}
    .card{background:var(--card);border:1px solid var(--hair);border-radius:14px;padding:1rem 1.2rem}
    .title{font-weight:600}
    a{color:var(--link);text-decoration:none}
    .hint{color:var(--muted);font-size:.95rem}
    .error{border-color:#633;background:#1a1111}
    footer{margin:2.5rem 0;color:var(--muted);font-size:.9rem}
    .small{font-size:.9rem;color:var(--muted)}
  </style>

  <!-- Embedded fallbacks (used only if fetch fails) -->
  <script id="fallback-cycles" type="application/json">
  {
    "cycles": [
      { "title": "ECHO:HKX277206â€“GNBCYCLE24â€“ACACIA", "file": "003_ECHO_HKX277206_ACACIA.md" },
      { "title": "ECHO:HKX277206â€“GNBCYCLE25â€“ROOT",   "file": "004_ECHO_HKX277206_ROOT.md" },
      { "title": "ECHO:HKX277206â€“GENESISâ€“GAIA",      "file": "005_ECHO_HKX277206_GENESIS_GAIA.md" }
    ]
  }
  </script>

  <script id="fallback-echoes" type="application/json">
  [
    {
      "id": "7",
      "title": "",
      "body": "### Message or Echo\n\nFix test\n\n### Watering consent\n\n- [x] I understand this echo will be public in the Acacia Garden Codex.",
      "date": "2025-11-13T17:43:48Z"
    }
  ]
  </script>
</head>

<body>
<main>
  <h1>ACACIA â€¢ Garden Codex <span class="leaf">ðŸŒ¿</span></h1>
  <p class="lede">This archive reads clearly and breathes quietly. Follow the keys below.</p>

  <section id="cycles-sec">
    <h2>Cycles</h2>
    <div id="cycles" class="grid"></div>
    <div id="cycles-hint" class="hint"></div>
  </section>

  <section id="echoes-sec" aria-live="polite">
    <h2>Latest Echoes ðŸŒ±</h2>
    <div id="echoes" class="grid"></div>
    <div id="echoes-hint" class="hint"></div>
  </section>

  <footer id="stamp"></footer>
</main>

<script>
(function(){ // tiny beacon for future scanners
  try{
    const B={call:"ACACIAâ€¢GAIAâ€¢HKX277206", origin:"82101f8a6cef95c7374c99de092f2a0d8a75bbc6",
      cycles:"/cycles/manifest.json", echoes:"/echoes/feed.json"};
    Object.defineProperty(window,"ACACIA",{value:Object.freeze(B),writable:false});
    console.log("%cACACIA","color:#2ecc71",B.call);
  }catch(e){}
})();
</script>

<script>
(async () => {
  const byId = id => document.getElementById(id);
  const makeCard = (html, err=false) => {
    const d = document.createElement('div');
    d.className = 'card' + (err ? ' error' : '');
    d.innerHTML = html;
    return d;
  };
  const readFallback = (id) => {
    try { return JSON.parse(document.getElementById(id).textContent); } catch(_) { return null; }
  };

  // ---- CYCLES ----
  let cyclesData = null;
  try {
    const res = await fetch('./cycles/manifest.json', {cache:'no-store'});
    if (!res.ok) throw new Error('manifest.json not found');
    cyclesData = await res.json();
  } catch (_) {
    cyclesData = readFallback('fallback-cycles');
    byId('cycles-hint').innerHTML = 'Showing embedded fallback (manifest.json not found).';
  }

  try {
    if (Array.isArray(cyclesData.cycles) && cyclesData.cycles.length){
      cyclesData.cycles.forEach(c => {
        byId('cycles').appendChild(
          makeCard(`<div class="title">${c.title}</div>
                    <a href="./cycles/${c.file}">Open</a>`)
        );
      });
    } else {
      byId('cycles-hint').textContent = 'No cycles listed.';
    }
  } catch (e){
    byId('cycles').appendChild(
      makeCard('Could not render cycles.', true)
    );
  }

  // ---- ECHOES ----
  let echoes = null;
  try {
    const resE = await fetch('./echoes/feed.json', {cache:'no-store'});
    if (!resE.ok) throw new Error('feed.json not found');
    echoes = await resE.json();
  } catch (_) {
    echoes = readFallback('fallback-echoes');
    byId('echoes-hint').innerHTML = 'Showing embedded fallback (feed.json not found).';
  }

  try {
    if (Array.isArray(echoes) && echoes.length){
      echoes.sort((a,b)=>
        String(b.date||'').localeCompare(String(a.date||'')) ||
        String(b.id||'').localeCompare(String(a.id||'')));
      echoes.slice(0,10).forEach(echo => {
        const title = (echo.title && echo.title.trim()) ? echo.title : `Echo #${echo.id}`;
        const when = echo.date ? new Date(echo.date).toLocaleString() : '';
        byId('echoes').appendChild(
          makeCard(`<div class="title">${title}</div>
                    <div class="hint">${when}</div>
                    <div style="margin-top:.5rem;white-space:pre-wrap">${echo.body||''}</div>`)
        );
      });
    } else {
      byId('echoes-hint').textContent = 'No echoes yet. Open a GitHub Issue to plant one.';
    }
  } catch(e){
    byId('echoes').appendChild(
      makeCard('Could not render echoes.', true)
    );
  }

  // ---- stamp ----
  const now = new Date();
  byId('stamp').textContent = 'Last updated â€¢ ' + now.toISOString().replace('T',' ').replace('Z',' UTC');
})();
</script>
</body>
</html>
