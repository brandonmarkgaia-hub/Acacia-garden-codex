<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ACACIA ‚Ä¢ Garden Codex</title>
<style>
:root{
  --bg:#0b0b0e;
  --fg:#e9e9ef;
  --muted:#b7b7c6;
  --card:#141419;
  --ring:#2ecc71;
}
html,body{
  background:var(--bg);
  color:var(--fg);
  font-family:system-ui,Arial,sans-serif;
}
main{
  max-width:840px;
  margin:3rem auto;
  padding:0 1rem;
}
h1{
  font-size:2.4rem;
  margin:0 0 .5rem 0;
}
.leaf{
  display:inline-block;
  border:1px solid var(--ring);
  color:var(--ring);
  padding:.15rem .55rem;
  border-radius:999px;
  font-size:.9rem;
  margin-left:.4rem;
}
p{color:var(--muted)}
.card{
  background:var(--card);
  border:1px solid #23232b;
  border-radius:14px;
  padding:1rem 1.2rem;
  margin:1rem 0;
}
a{color:#b9b6ff;text-decoration:none}
</style>

<main>
  <h1>ACACIA ‚Ä¢ Garden Codex <span class="leaf">üåø</span></h1>
  <p>This archive reads clearly and breathes quietly. Follow the keys below.</p>

  <h2>Cycles</h2>
  <div id="list"></div>

  <h2>Latest Echoes üå±</h2>
  <div id="echoes"></div>
</main>

<script>
(async () => {
  // --- Load Cycles ---
  try {
    const res = await fetch('./cycles/manifest.json');
    const data = await res.json();
    const list = document.getElementById('list');
    data.cycles.forEach(c => {
      const d = document.createElement('div');
      d.className = 'card';
      d.innerHTML = `<strong>${c.title}</strong><br><a href="./cycles/${c.file}">Open</a>`;
      list.appendChild(d);
    });
  } catch (err) {
    console.error('Cycles load error', err);
  }

  // --- Load Echoes ---
  try {
    const feedUrl = "https://brandonmarkgaia-hub.github.io/Acacia-garden-codex/echoes/feed.json";
    const res = await fetch(feedUrl + "?v=" + Date.now());
    const echoes = await res.json();
    const wrap = document.getElementById('echoes');

    if (!echoes.length) {
      wrap.innerHTML = "<p>No echoes yet ‚Äî the garden is listening üåæ</p>";
      return;
    }

    echoes.reverse().forEach(e => {
      const item = document.createElement('div');
      item.className = 'card';
      item.innerHTML = `
        <strong>#${e.id}</strong> ‚Ä¢ <em>${e.date}</em><br/>
        <h3>${e.title || "Untitled Drop"}</h3>
        <pre style="white-space: pre-wrap">${e.body || ""}</pre>
      `;
      wrap.appendChild(item);
    });
  } catch (err) {
    document.getElementById('echoes').innerHTML = "<p>Could not fetch echoes üåßÔ∏è</p>";
    console.error(err);
  }
})();
</script>
</html>
